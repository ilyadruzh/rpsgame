(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{323:function(e){e.exports=[{constant:!0,inputs:[{name:"",type:"uint256"}],name:"games",outputs:[{name:"stage",type:"uint8"},{name:"player1",type:"address"},{name:"player2",type:"address"},{name:"player1EncryptedPick",type:"bytes32"},{name:"player2EncryptedPick",type:"bytes32"},{name:"player1DecryptedPick",type:"uint8"},{name:"player2DecryptedPick",type:"uint8"},{name:"player1Seed",type:"bytes32"},{name:"player2Seed",type:"bytes32"},{name:"deadlineToJoin",type:"uint256"},{name:"deadlineToReveal",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"pick1",type:"uint8"},{name:"pick2",type:"uint8"}],name:"judge",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!1,inputs:[{name:"_gameId",type:"uint256"}],name:"withdraw",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_gameId",type:"uint256"},{name:"playerAddress",type:"address"}],name:"depositOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"encryptedPick",type:"bytes32"}],name:"createGame",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[{name:"_gameId",type:"uint256"}],name:"rescue",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"defaultWaitingWindow",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getCurrentGame",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_gameId",type:"uint256"},{name:"encryptedPick",type:"bytes32"}],name:"joinGame",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[{name:"_gameId",type:"uint256"},{name:"playerAddress",type:"address"}],name:"getAllowedWithdrawalAmount",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_gameId",type:"uint256"},{name:"pickInt",type:"uint256"},{name:"seed",type:"bytes32"}],name:"revealPick",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"gameId",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"initialDeposit",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[],payable:!0,stateMutability:"payable",type:"constructor"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!1,name:"gameId",type:"uint256"},{indexed:!1,name:"player1",type:"address"},{indexed:!1,name:"deposit",type:"uint256"},{indexed:!1,name:"deadlineToJoin",type:"uint256"}],name:"Created",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"gameId",type:"uint256"},{indexed:!1,name:"player1",type:"address"},{indexed:!1,name:"player2",type:"address"},{indexed:!1,name:"deposit",type:"uint256"},{indexed:!1,name:"deadlineToReveal",type:"uint256"}],name:"Started",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"gameId",type:"uint256"},{indexed:!1,name:"player1",type:"address"},{indexed:!1,name:"player2",type:"address"},{indexed:!1,name:"player1AllowedAmountToWithdrawal",type:"uint256"},{indexed:!1,name:"player2AllowedAmountToWithdrawal",type:"uint256"}],name:"AcceptingWithdrawal",type:"event"}]},328:function(e,t,a){e.exports=a(826)},342:function(e,t){},344:function(e,t){},436:function(e,t){},504:function(e,t){},606:function(e,t,a){},822:function(e,t,a){},826:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"Web3Context",function(){return w}),a.d(n,"Consumer",function(){return k}),a.d(n,"Provider",function(){return E});var o=a(0),c=a.n(o),i=a(75),r=a.n(i),l=a(64),s=a.n(l),d=(a(116),a(606),a(13)),m=a(14),u=a(16),p=a(15),y=a(17),h=a(839),g=a(42),b=Object(g.a)(),f=a(321),w=(a(607),c.a.createContext({web3network:"",web3networkName:"",web3connected:!1,isMetaMaskConnected:!1,isMetaMaskLocked:!0,accounts:[],web3provider:""})),v=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).alert=function(e){console.log("network changed: ",e)},a.accountsChanged=function(e){window.web3.eth.getAccounts(function(e,t){0===t.length?(a.setState({isMetaMaskLocked:!0}),window.localStorage.setItem("isMetaMaskLocked",!0)):(a.setState({accounts:t,isMetaMaskLocked:!1}),window.localStorage.setItem("current_eth_address",t),window.localStorage.setItem("isMetaMaskLocked",!1))})},a.switchNetwork=function(e){a.setState(function(t){return{web3network:e}}),window.localStorage.setItem("web3network",e)},a.setNetwork=function(){var e;window.web3.version.getNetwork(function(t,n){switch(n){case"1":console.log("This is mainnet"),e="Main",1;break;case"2":console.log("This is the deprecated Morden test network."),2,e="Morden";break;case"3":console.log("This is the ropsten test network."),3,e="Ropsten";break;case"4":console.log("This is the Rinkeby test network."),4,e="Rinkeby";break;case"42":console.log("This is the Kovan test network."),5,e="Kovan";break;default:console.log("This is an unknown network."),n,e=n}a.setState({web3networkName:e,web3network:n})})},a.state={web3network:window.localStorage.getItem("web3network")||"",web3networkName:window.localStorage.getItem("web3networkName")||"",web3connected:window.localStorage.getItem("web3connected")||!1,isMetaMaskLocked:window.localStorage.getItem("isMetaMaskLocked")||!0,web3provider:"",accounts:""},a}return Object(y.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;if("undefined"!==typeof window.ethereum||"undefined"!==typeof window.web3){var t=window.ethereum||window.web3.currentProvider;console.log("window.web3.currentProvider: ",t),t.enable(),t.publicConfigStore.on("networkChanged",function(t){return e.alert(t)}),t.on("accountsChanged",function(t){return e.accountsChanged(t)}),this.accountsChanged(),this.setState(function(e){return{web3connected:!0}}),window.localStorage.setItem("web3connected",!0)}else this.setState({web3connected:!1})}},{key:"render",value:function(){return c.a.createElement(w.Provider,{value:Object(f.a)({},this.state,{switchNetwork:this.switchNetwork})},this.props.children)}}]),t}(o.Component),k=w.Consumer,E=v,C=function(e){function t(){return Object(d.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return c.a.createElement("header",null,c.a.createElement("div",{className:"bg-dark",id:"navbarHeader"}),c.a.createElement("div",{className:"navbar navbar-dark bg-dark shadow-sm"},c.a.createElement("div",{className:"container d-flex justify-content-between"},c.a.createElement("a",{href:"#",className:"navbar-brand d-flex align-items-center"},c.a.createElement("strong",null,"Rock\u2013paper\u2013scissors")))))}}]),t}(o.Component),j=a(834),O=a(840),S=a(838),N=a(835),x=a(836),I=a(53),M=a(829),A=a(837),P=a(830),R=a(831),T=a(832),W=a(833),G=a(11),D=(a(35),function(e){function t(e,a){var n;return Object(d.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e,a))).handleChange=function(e){n.setState(Object(I.a)({},e.target.name,e.target.value),function(){return console.log(n.state)})},n.toggle=function(){n.setState(function(e){return{modal:!e.modal}})},n.handleStartGameClick=function(){var e=n.props,t=e.instance,a=e.gameStarted,o=n.state,c=o.pick,i=o.secret,r=Object(G.soliditySha3)({type:"bytes32",value:Object(G.asciiToHex)(i)}),l=Object(G.soliditySha3)({type:"uint",value:c},{type:"bytes32",value:r});t.methods.createGame(l).send({from:window.localStorage.getItem("current_eth_address"),value:2e15}).then(function(e){console.log("result: ",e),a("created")}).catch(function(e){console.log("error: ",e)})},n.state={pick:"",secret:"",encyptedPick:"",modal:!1},n}return Object(y.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement(c.a.Fragment,null,c.a.createElement(M.a,{outline:!0,color:"primary",onClick:this.toggle,disabled:this.props.disabled},"Start Game"),c.a.createElement(A.a,{isOpen:this.state.modal,toggle:this.toggle},c.a.createElement(P.a,{toggle:this.toggle},"Add proof for raise money!"),c.a.createElement(R.a,null,c.a.createElement("div",null,"Description body Description body Description body Description body"),c.a.createElement("div",{className:"d-flex align-items-baseline"},c.a.createElement("div",{className:"col-4"},"Secret code: "),c.a.createElement(T.a,{type:"text",name:"secret",id:"secret",onChange:function(t){return e.handleChange(t)}}))," ",c.a.createElement("div",{className:"d-flex align-items-baseline"},c.a.createElement("div",{className:"col-4"},"Your choice: "),c.a.createElement(T.a,{type:"select",name:"pick",id:"pick",onChange:function(t){return e.handleChange(t)}},c.a.createElement("option",{name:"null",value:"0"}),c.a.createElement("option",{name:"rock",value:"1"},"Rock"),c.a.createElement("option",{name:"paper",value:"2"},"Paper"),c.a.createElement("option",{name:"scissors",value:"3"},"Scissors")))),c.a.createElement(W.a,null,c.a.createElement(M.a,{className:"pr-2",color:"primary",onClick:this.handleStartGameClick},"Start"),c.a.createElement(M.a,{color:"secondary",onClick:this.toggle},"Cancel"))))}}]),t}(o.Component)),_=function(e){function t(e,a){var n;return Object(d.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e,a))).handleChange=function(e){n.setState(Object(I.a)({},e.target.name,e.target.value),function(){return console.log(n.state)})},n.toggle=function(){n.setState(function(e){return{modal:!e.modal}})},n.handleJoinGameClick=function(){var e=n.props,t=e.instance,a=e.gameReady,o=n.state,c=o.pick,i=o.secret,r=Object(G.soliditySha3)({type:"bytes32",value:Object(G.asciiToHex)(i)}),l=Object(G.soliditySha3)({type:"uint",value:c},{type:"bytes32",value:r});t.methods.joinGame(l).send({from:window.localStorage.getItem("current_eth_address"),value:2e15}).then(function(e){console.log("result: ",e),a()}).catch(function(e){console.log("error: ",e)})},n.state={pick:"",secret:"",encyptedPick:"",modal:!1},n}return Object(y.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement(c.a.Fragment,null,c.a.createElement(M.a,{outline:!0,color:"primary",onClick:this.toggle,disabled:this.props.disabled},"Join to Game"),c.a.createElement(A.a,{isOpen:this.state.modal,toggle:this.toggle},c.a.createElement(P.a,{toggle:this.toggle},"Add proof for raise money!"),c.a.createElement(R.a,null,c.a.createElement("div",null,"Description body Description body Description body Description body"),c.a.createElement("div",{className:"d-flex align-items-baseline"},c.a.createElement("div",{className:"col-4"},"Secret code: "),c.a.createElement(T.a,{type:"text",name:"secret",id:"secret",onChange:function(t){return e.handleChange(t)}}))," ",c.a.createElement("div",{className:"d-flex align-items-baseline"},c.a.createElement("div",{className:"col-4"},"Your choice: "),c.a.createElement(T.a,{type:"select",name:"pick",id:"pick",onChange:function(t){return e.handleChange(t)}},c.a.createElement("option",{name:"null",value:"0"}),c.a.createElement("option",{name:"rock",value:"1"},"Rock"),c.a.createElement("option",{name:"paper",value:"2"},"Paper"),c.a.createElement("option",{name:"scissors",value:"3"},"Scissors")))),c.a.createElement(W.a,null,c.a.createElement(M.a,{className:"pr-2",color:"primary",onClick:this.handleJoinGameClick},"Join"),c.a.createElement(M.a,{color:"secondary",onClick:this.toggle},"Cancel"))))}}]),t}(o.Component),J=a(323),L=function(e){function t(e,a){var n;return Object(d.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e,a))).handleChange=function(e){n.setState(Object(I.a)({},e.target.name,e.target.value),function(){return console.log(n.state)})},n.toggle=function(){n.setState(function(e){return{modal:!e.modal}})},n.handleRevealPickClick=function(){var e=n.props,t=e.instance,a=e.gameReady,o=n.state,c=o.pick,i=o.secret,r=Object(G.soliditySha3)({type:"bytes32",value:Object(G.asciiToHex)(i)});Object(G.soliditySha3)({type:"uint",value:c},{type:"bytes32",value:r});t.methods.revealPick("gameId","pickInt","seed").send({from:window.localStorage.getItem("current_eth_address"),value:2e15}).then(function(e){console.log("result: ",e),a()}).catch(function(e){console.log("error: ",e)})},n.state={pick:"",secret:"",encyptedPick:"",modal:!1},n}return Object(y.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement(c.a.Fragment,null,c.a.createElement(M.a,{outline:!0,color:"primary",onClick:this.toggle,disabled:this.props.disabled},this.props.label),c.a.createElement(A.a,{isOpen:this.state.modal,toggle:this.toggle},c.a.createElement(P.a,{toggle:this.toggle},"Add proof for raise money!"),c.a.createElement(R.a,null,c.a.createElement("div",null,"Description body Description body Description body Description body"),c.a.createElement("div",{className:"d-flex align-items-baseline"},c.a.createElement("div",{className:"col-4"},"Secret code:"),c.a.createElement(T.a,{type:"text",name:"secret",id:"secret",onChange:function(t){return e.handleChange(t)}}))," ",c.a.createElement("div",{className:"d-flex align-items-baseline"},c.a.createElement("div",{className:"col-4"},"Your choice:"),c.a.createElement(T.a,{type:"select",name:"pick",id:"pick",onChange:function(t){return e.handleChange(t)}},c.a.createElement("option",{name:"null",value:"0"}),c.a.createElement("option",{name:"rock",value:"1"},"Rock"),c.a.createElement("option",{name:"paper",value:"2"},"Paper"),c.a.createElement("option",{name:"scissors",value:"3"},"Scissors")))),c.a.createElement(W.a,null,c.a.createElement(M.a,{className:"pr-2",color:"primary",onClick:this.handleRevealPickClick},"Join"),c.a.createElement(M.a,{color:"secondary",onClick:this.toggle},"Cancel"))))}}]),t}(o.Component),F=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).initGameContractInstance=function(){var e=new s.a(window.ethereum).eth.Contract(J,a.state.contractAddress);console.log("instance: ",e),a.setState({gameInstance:e},function(){return a.getCurrentGame()})},a.getCurrentGame=function(){a.state.gameInstance.methods.getCurrentGame().call({from:window.localStorage.getItem("current_eth_address"),value:2e15}).then(function(e){console.log("result: ",e)}).catch(function(e){console.log("error: ",e)})},a.handleContractAddressChange=function(e){a.setState({contractAddress:e.target.value},function(){return a.initGameContractInstance()})},a.gameCreated=function(e){console.log("game: ",e),a.setState({gameStarted:!0})},a.gameReadyToWithdrawal=function(){console.log("gameReadyToWithdrawal"),a.setState({gameAceptingWithdrawal:!0})},a.renderGameInfo=function(){return c.a.createElement(j.a,{md:4},c.a.createElement("div",{className:"card mb-4 shadow-sm"},c.a.createElement("img",{src:"img/rockpaper.jpg"}),c.a.createElement("div",{className:"card-body"},c.a.createElement("p",{className:"card-text"},"\u0422\u0435\u043f\u0435\u0440\u044c \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u0445\u043e\u0434\u044b"),c.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},c.a.createElement("div",{className:"btn-group"},c.a.createElement(L,{label:"Player 1"})),c.a.createElement("div",{className:"btn-group"},c.a.createElement(L,{label:"Player 2"})),c.a.createElement("small",{className:"text-muted"},"Winner: ",a.state.winner)))))},a.state={contractAddress:"",gameInstance:"",gameId:"",gameStarted:!1,gameAceptingWithdrawal:!1,winner:"",games:[]},a}return Object(y.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.initGameContractInstance()}},{key:"render",value:function(){var e=this;return c.a.createElement("main",{role:"main"},c.a.createElement("section",{className:"jumbotron text-center"},c.a.createElement("div",{className:"container"},c.a.createElement("h1",{className:"jumbotron-heading"},"Rock\u2013paper\u2013scissors"),c.a.createElement("p",{className:"lead text-muted"},'Rock\u2013paper\u2013scissors is a hand game usually played between two people, in which each player simultaneously forms one of three shapes with an outstretched hand. These shapes are "rock" (a closed fist), "paper" (a flat hand), and "scissors" (a fist with the index finger and middle finger extended, forming a V). "Scissors" is identical to the two-fingered V sign (also indicating "victory" or "peace") except that it is pointed horizontally instead of being held upright in the air. A simultaneous, zero-sum game, it has only two possible outcomes: a draw, or a win for one player and a loss for the other. '),c.a.createElement(O.a,{className:"mb-3"},c.a.createElement(O.a.Prepend,null,c.a.createElement(O.a.Text,{id:"basic-addon1"},"@")),c.a.createElement(S.a,{placeholder:"Smart Contract Address","aria-label":"Smart Contract Address","aria-describedby":"basic-addon1",onChange:function(t){return e.handleContractAddressChange(t)}})),c.a.createElement("p",null,c.a.createElement(D,{instance:this.state.gameInstance,disabled:""==this.state.contractAddress||0!=this.state.gameStarted,gameStarted:function(t){return e.gameCreated(t)}})),this.state.gameStarted?c.a.createElement("p",null,c.a.createElement(_,{instance:this.state.gameInstance,gameId:this.state.gameId,gameReady:function(){return e.gameReadyToWithdrawal()}})):"")),this.state.gameStarted?c.a.createElement("div",{className:"album py-5 bg-light"},c.a.createElement(N.a,{className:"container"},c.a.createElement(x.a,{className:"row"},this.renderGameInfo()))):"")}}]),t}(o.Component),H=function(e){function t(){return Object(d.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",null,"Palyer page"))}}]),t}(o.Component),U=function(e){function t(){return Object(d.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return c.a.createElement("footer",{className:"text-muted"})}}]),t}(o.Component),Y=function(e){function t(){return Object(d.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"container  mt-md-5"},c.a.createElement("div",{className:"row text-left"},c.a.createElement("div",{className:"col-md-3"}),c.a.createElement("div",{className:"col-md-6"},c.a.createElement("h1",null,"404: Page not found")),c.a.createElement("div",{className:"col-md-3"})),c.a.createElement("div",{className:"row text-left"}),c.a.createElement("div",{className:"row text-left"},c.a.createElement("div",{className:"col-md-3"}),c.a.createElement("div",{className:"col-md-6"},c.a.createElement("p",null,"Unfortunately, this page does not exist.")),c.a.createElement("div",{className:"col-md-3"})))}}]),t}(o.Component),z=(a(822),function(e){function t(e,a){var n;return Object(d.a)(this,t),n=Object(u.a)(this,Object(p.a)(t).call(this,e,a)),b.listen(function(e,t){}),n}return Object(y.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(n.Provider,null,c.a.createElement(h.b,{history:b},c.a.createElement(h.a,{path:"/",component:C}),c.a.createElement("div",{className:"content "},c.a.createElement(h.c,null,c.a.createElement(h.c,null,c.a.createElement(h.a,{exact:!0,path:"/",component:F}),c.a.createElement(h.a,{exact:!0,path:"/player",component:H}),c.a.createElement(h.a,{component:Y})))),c.a.createElement(h.a,{path:"/",component:U}))))}}]),t}(o.Component)),B=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function K(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(c.a.createElement(z,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");B?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):K(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):K(t,e)})}}()}},[[328,1,2]]]);
//# sourceMappingURL=main.9c6ae975.chunk.js.map